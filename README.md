# International Payments Portal

A secure international payments portal that allows banking customers to register, authenticate, and initiate SWIFT payments through a hardened full-stack implementation. The project demonstrates how to enforce strict security controls across a modern React frontend and an Express/MongoDB backend.

## Project Overview

The portal is designed for an international bank's internal development team and showcases secure-by-design development practices. Customers can register with personal and account details, manage beneficiaries, choose currencies and payment providers, and track international transactions. Security is considered at every layer, from password handling to transport encryption and protection against common web attacks.

### Academic Context

This is a student project (INSY7314 - Part 2, Group 9) that evidences secure development practices required for a banking application.

## Key Features

- **Secure Registration & Authentication**: Password hashing with bcrypt, salting, secure cookies for session management, and CSRF token enforcement.
- **Input Validation & Sanitisation**: RegEx-based whitelisting, DOMPurify integration, and MongoDB sanitisation to block XSS and NoSQL injection attacks.
- **International Payment Processing**: Currency selection, SWIFT payment provider integration, and transaction verification workflow.
- **Comprehensive Security Measures**: SSL/TLS, Helmet for HTTP headers, Express Brute, rate limiting, and HTTP parameter pollution (HPP) defence.
- **Robust Development Support**: Mock Service Worker (MSW) for API mocking, RESTful backend architecture, and extensive frontend state management.

## Technology Stack

### Frontend

- React 19, TypeScript, Vite, React Router DOM
- React Hook Form, Zod, TanStack Query, Axios
- DOMPurify, js-cookie

### Backend

- Node.js, Express, MongoDB
- bcryptjs, helmet, express-rate-limit, express-brute, express-brute-mongoose
- express-mongo-sanitize, csurf, cookie-parser

### Tooling

- ESLint, Vitest, Testing Library
- MSW for integration testing

## Prerequisites

- Node.js v18 or later
- npm (bundled with Node.js) or Yarn
- MongoDB (local installation or MongoDB Atlas account)
- SSL certificates for local HTTPS (self-signed certificates are included for development)

## Installation and Setup

```bash
# Clone the repository
git clone https://github.com/VCSTDN2024/insy7314-part2-gr9.git
cd insy7314-part2-gr9

# Install frontend dependencies
npm install

# Install backend dependencies
cd backend
npm install
cd ..
```

## Configuration

Create a `.env` file inside the `backend/` directory and provide the necessary configuration values:

```bash
MONGODB_URI=mongodb://localhost:27017/payments-portal
# For MongoDB Atlas, use the following format:
# MONGODB_URI=mongodb+srv://<username>:<password>@cluster.mongodb.net/payments-portal

JWT_SECRET=your-secret-key-here
PORT=5000
NODE_ENV=development
```


ðŸš€ Running the Application

ðŸ§° Start the Backend

cd backend
npm start

or (if you prefer hot-reload in dev)

npm run dev

The API will be available at:

https://localhost:3001

âš  Since this uses a self-signed HTTPS certificate, your browser will prompt you to accept it the first time. Accept it so requests donâ€™t get blocked.



ðŸ’» Start the Frontend

Open a new terminal tab or window:

npm run dev

Then access the client at:

https://localhost:5173

âœ… CSRF tokens and Auth tokens are stored securely in Session Storage, and HTTPS is required for all requests.

â¸»

ðŸ§ª Development Commands

# Frontend dev server
npm run dev

# Backend dev server
cd backend
npm start     # or npm run dev for nodemon if configured

## Security Implementation

The portal targets full marks for the security requirements defined in the assignment specification:

- **Password Security (10/10)**: Bcrypt with salting and additional controls beyond the minimum requirements.
- **Input Whitelisting (10/10)**: Rigorous RegEx validation and Zod schemas to prevent injection attacks.
- **Data in Transit Security (20/20)**: HTTPS enforced with valid certificates and additional encryption safeguards.
- **Attack Protection (30/30)**:
  - XSS: Content Security Policy (CSP), DOMPurify sanitisation, and input validation.
  - CSRF: Tokens generated by `csurf`, stored in `sessionStorage`, and automatically attached to state-changing requests.
  - Brute-force and DoS: Express Brute, express-rate-limit, Helmet hardening, and HPP defences.
  - NoSQL Injection: express-mongo-sanitize across all database interactions.
- **DevSecOps Pipeline (10/10)**: CI/CD configuration with automated security checks on every push.

## Security Testing

A browser-based security test suite verifies the enforcement of the implemented controls.

1. Launch the application and open the browser's developer console.
2. Navigate to any page and run the provided security checks from the console.
3. Review the console output to confirm protection coverage, including XSS, CSRF token presence, and request interception handling.

Example console interactions:

```javascript
// XSS protection verification
console.log('Testing XSS: <script>alert("XSS")</script>');

// CSRF token inspection
const csrfToken = sessionStorage.getItem('csrf_token');
console.log('CSRF Token:', csrfToken ? 'Found' : 'Missing');
```

## Future Enhancements

- Employee portal for transaction verification and approval.
- Expanded payment capabilities including multi-currency support and recurring payments.
- Advanced analytics with transaction history visualisations.
- Two-factor authentication for user accounts.
- Email notifications and audit logging for compliance.

## Project Structure

```
insy7314-part2-gr9/
â”œâ”€â”€ backend/           # Express backend
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â””â”€â”€ server.js
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ src/               # React frontend
â”‚   â”œâ”€â”€ main.tsx
â”‚   â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ layout/
â”‚   â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ security/
â”‚   â””â”€â”€ styles/
â”œâ”€â”€ public/
â””â”€â”€ package.json
```

## Reference Resources

- Official React, Express, MongoDB, and security middleware documentation.
- Course-provided secure development guidelines.

## License

Developed for academic purposes. Consult institutional policy before reusing or sharing the code.

## Contributors

INSY7314 Part 2 â€” Group 9

## Role-Based Access & Employee Portal

The platform now ships with two built-in roles:

- **Customer** accounts manage beneficiaries, create payments, and view their own transactions.
- **Employee** accounts access a read-only operations portal at `/employee/transactions` that aggregates every customer payment with the related beneficiary and account owner details.

### Default Seeded Accounts

Run the seeding script once you have network access to MongoDB Atlas (or after configuring `MONGODB_URI` for a local instance):

```bash
cd backend
npm run seed
```

This creates two login-ready users:

| Role      | Email                   | Password       |
|-----------|-------------------------|----------------|
| Customer  | `customer@example.com`  | `Customer123!` |
| Employee  | `employee@example.com`  | `Employee123!` |

### Environment Overrides

The backend defaults to the shared Atlas connection string but you can override it (and the default database name) without editing source by setting:

```bash
export MONGODB_URI="mongodb+srv://<user>:<pass>@<cluster>/<db>"
export MONGODB_DB="payments_portal"
```

Create `backend/.env` (you can copy `backend/.env.example`) and place the values there if you prefer not to export them manually.

### Local Run Quick Start

```bash
# from project root
npm install
cd backend && npm install && cd ..

# seed accounts (requires DB access)
cd backend && npm run seed && cd ..

# start the stack
cd backend && npm start &
npm run dev
```

Open `https://localhost:5173` and authenticate with the seeded credentials. Customers are redirected to the standard dashboard; employees land on the dedicated oversight view.
